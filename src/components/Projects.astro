<script>
    document.addEventListener("DOMContentLoaded", function () {
        const hoverTarget = document.getElementById("hovertest");
        const projectHover = document.getElementById("project-hover");
        const imageContainer = projectHover.querySelector(".image-container");
        const projects = document.querySelectorAll("#hovertest > li");
        const liveSite = document.getElementById("live-site");

        let mouseX = 0,
            mouseY = 0;
        let hoverX = 0,
            hoverY = 0;
        let liveX = 0,
            liveY = 0;
        const speed = 0.1;

        // Function to update the image based on hovered project
        function updateImageOnHover() {
            projects.forEach((project, index) => {
                project.addEventListener("mouseenter", () => {
                    const newTopPosition = -(500 * index); // Assuming hoverHeight is 500
                    imageContainer.style.top = `${newTopPosition}px`;
                });
            });
        }

        // Handle mouse enter and leave for hoverTarget
        function setupHoverTargetListeners() {
            hoverTarget.addEventListener("mouseenter", () =>
                projectHover.classList.add("active"),
            );
            hoverTarget.addEventListener("mouseleave", () =>
                projectHover.classList.remove("active"),
            );
        }

        // Update projectHover position on mouse move
        function updateHoverPosition(e) {
            mouseX = e.clientX - 250; // Assuming hoverWidth is 500
            mouseY = e.clientY - 250 + window.scrollY; // Assuming hoverHeight is 500
        }

        // Animation loop for smooth movement
        function animate() {
            hoverX += (mouseX - hoverX) * speed;
            hoverY += (mouseY - hoverY) * speed;
            const distanceX = mouseX - hoverX;
            const distanceY = mouseY - hoverY;
            const distance = Math.sqrt(
                distanceX * distanceX + distanceY * distanceY,
            );
            // Use a square root to ensure the speed increases with distance but at a decreasing rate
            const dynamicSpeed = Math.min(
                speed + Math.sqrt(distance) / 100,
                0.5,
            ); // Cap the speed with a maximum value
            projectHover.style.left = `${hoverX}px`;
            projectHover.style.top = `${hoverY}px`;

            liveX += (mouseX + 250 - 28 - liveX) * dynamicSpeed;
            liveY += (mouseY + 250 - 28 - liveY) * dynamicSpeed;
            liveSite.style.left = `${liveX}px`;
            liveSite.style.top = `${liveY}px`;
            requestAnimationFrame(animate);
        }

        updateImageOnHover();
        setupHoverTargetListeners();
        hoverTarget.addEventListener("mousemove", updateHoverPosition);
        animate();
    });
</script>
<div>
    <div
        class="pointer-events-none cursor-pointer absolute rounded-full bg-blue-600 h-14 text-[10px] p-6 w-14 text-white font-medium flex justify-center items-center leading-none z-50"
        id="live-site"
    >
        Live Site
    </div>
    <div
        id="project-hover"
        class="absolute bottom-0 left-0 h-0 w-0 transition-all bg-red-50 flex items-center justify-center z-10"
    >
        <div class="image-container w-full h-full">
            <a href="https://www.fotoschwab.de" target="_blank">
                <li class="hover-img">
                    <img src="https://placehold.co/500x300" alt="placeholder" />
                </li>
            </a>
            <li class="hover-img">
                <img src="https://placehold.co/500x400" alt="placeholder" />
            </li>
            <li class="hover-img">
                <img src="https://placehold.co/500x500" alt="placeholder" />
            </li>
            <li class="hover-img">
                <img src="https://placehold.co/500x200" alt="placeholder" />
            </li>
            <li class="hover-img">
                <img src="https://placehold.co/500x200" alt="placeholder" />
            </li>
        </div>
    </div>
</div>
<h3 class="text-5xl font-bold">Meine Projekte</h3>
<ul class="my-10" id="hovertest">
    <li>
        <div class="stripe"></div>
        <div class="flex w-full justify-between my-10">
            <h4 class="text-3xl font-bold">Foto-Studio Schwab</h4>
            <p>Design & Development</p>
        </div>
    </li>
    <li>
        <div class="stripe"></div>
        <div class="flex w-full justify-between my-10">
            <h4 class="text-3xl font-bold">PhotoFlow</h4>
            <p>Design & Development</p>
        </div>
    </li>
    <li>
        <div class="stripe"></div>
        <div class="flex w-full justify-between my-10">
            <h4 class="text-3xl font-bold">SnapTrack</h4>
            <p>Design & Development</p>
        </div>
    </li>
    <li>
        <div class="stripe"></div>
        <div class="flex w-full justify-between my-10">
            <h4 class="text-3xl font-bold">LensLedger</h4>
            <p>Design & Development</p>
        </div>
    </li>
    <li>
        <div class="stripe"></div>
        <div class="flex w-full justify-between my-10">
            <h4 class="text-3xl font-bold">domenicwalther.de</h4>
            <p>Design & Development</p>
        </div>
    </li>
</ul>

<style>
    .stripe {
        display: block;
        height: 1px;
        background-color: rgba(28, 29, 32, 0.175);
        width: 100%;
    }
    #project-hover {
        position: absolute;
        overflow: hidden;
        transform: scale(0);
        bottom: 0;
        left: 0;
        width: 500px;
        height: 500px;
        transition: transform 0.5s ease;
        transform-origin: center;
        pointer-events: none; /* Ignore pointer events */
        z-index: 10; /* Ensure it's above other content */
    }

    #project-hover.active {
        transform: scale(1);
        transition: transform 0.5s ease;
    }

    .image-container {
        position: absolute;
        top: 0;
        transition: top 0.5s ease-out;
    }

    .hover-img {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .hover-img.active {
        display: block;
    }
</style>
